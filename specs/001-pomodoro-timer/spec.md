# Feature Specification: 基本番茄鐘

**Feature Branch**: `001-pomodoro-timer`
**Created**: 2026-02-17
**Status**: Draft
**Input**: 基本番茄鐘：25/5 分鐘工作休息循環、倒數計時、開始/暫停/重置、音效提醒

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 工作倒數計時 (Priority: P1)

使用者想要開始一段 25 分鐘的專注工作時間。打開應用程式後，
畫面上顯示倒數計時器（預設 25:00）。使用者點擊「開始」按鈕，
計時器開始倒數，畫面上的時間每秒更新一次。計時結束時，
應用程式發出音效提醒使用者工作時間已到。

**Why this priority**: 倒數計時是番茄鐘的核心功能。沒有這個功能，
應用程式沒有任何使用價值。

**Independent Test**: 啟動應用程式，點擊開始，觀察計時器從 25:00
倒數至 00:00，確認音效響起且畫面顯示工作完成。

**Acceptance Scenarios**:

1. **Given** 應用程式剛啟動，**When** 使用者點擊「開始」按鈕，
   **Then** 計時器從 25:00 開始倒數，畫面每秒更新一次
2. **Given** 計時器正在倒數，**When** 剩餘時間到達 00:00，
   **Then** 計時器停止並發出音效提醒
3. **Given** 計時器到達 00:00，**When** 音效提醒結束，
   **Then** 畫面顯示「工作完成」並提示進入休息

---

### User Story 2 - 暫停與控制 (Priority: P2)

使用者在工作過程中可能被打斷（電話、同事詢問等）。此時
使用者需要暫停計時器，處理完後再恢復倒數。使用者也可以
在任何時候重置計時器回到初始狀態。

**Why this priority**: 暫停/恢復/重置是基本的使用者控制功能，
讓番茄鐘在真實工作場景中可用。

**Independent Test**: 啟動計時器後點擊暫停，確認計時器停止；
點擊恢復，確認從暫停處繼續倒數；點擊重置，確認計時器回到
25:00。

**Acceptance Scenarios**:

1. **Given** 計時器正在倒數（例如 18:32），**When** 使用者
   點擊「暫停」，**Then** 計時器停在 18:32 不再變動
2. **Given** 計時器已暫停在 18:32，**When** 使用者點擊
   「繼續」，**Then** 計時器從 18:32 繼續倒數
3. **Given** 計時器處於任何狀態（倒數中或已暫停），**When**
   使用者點擊「重置」，**Then** 計時器回到 25:00 並停止

---

### User Story 3 - 工作與休息循環 (Priority: P3)

使用者完成一段 25 分鐘的工作後，應自動進入 5 分鐘的休息
倒數。休息結束後，再次提醒使用者並回到工作模式。使用者
可以清楚看到目前處於「工作」或「休息」哪一個階段。

**Why this priority**: 工作/休息循環是番茄鐘技法的完整體驗，
但核心價值（倒數計時）在 P1 已實現，此為完整性增強。

**Independent Test**: 讓工作計時器跑完 25 分鐘，確認自動切換
到 5 分鐘休息模式並開始倒數；休息結束後確認回到工作模式。

**Acceptance Scenarios**:

1. **Given** 工作計時結束（00:00），**When** 使用者確認
   進入休息，**Then** 計時器切換為「休息」模式，顯示 05:00
   並開始倒數
2. **Given** 休息計時結束（00:00），**When** 休息時間到，
   **Then** 發出音效提醒並切換回「工作」模式，顯示 25:00
3. **Given** 計時器處於任何模式，**When** 使用者觀看畫面，
   **Then** 可以清楚看到目前是「工作」或「休息」階段

---

### Edge Cases

- 使用者在計時器到達 00:00 的瞬間按下暫停，系統 MUST 仍觸發
  完成提醒而非停在 00:00
- 使用者連續快速點擊開始/暫停按鈕，計時器 MUST 保持一致的
  狀態（不得出現計時錯亂）
- 應用程式視窗被最小化或失去焦點時，計時 MUST 繼續正確運作
- 使用者在休息模式下按重置，MUST 回到工作模式的 25:00

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 應用程式 MUST 顯示一個大型、易讀的倒數計時器，
  格式為 MM:SS
- **FR-002**: 應用程式 MUST 提供「開始」按鈕，點擊後開始倒數
- **FR-003**: 應用程式 MUST 提供「暫停」按鈕，點擊後暫停倒數；
  暫停後該按鈕 MUST 變為「繼續」
- **FR-004**: 應用程式 MUST 提供「重置」按鈕，點擊後將計時器
  恢復至當前模式的初始時間（工作 25:00 或休息 05:00）
- **FR-005**: 工作時間預設為 25 分鐘（1500 秒），
  休息時間預設為 5 分鐘（300 秒）
- **FR-006**: 計時器到達 00:00 時 MUST 播放音效通知使用者
- **FR-007**: 畫面 MUST 明確顯示目前所處的模式（工作或休息）
- **FR-008**: 工作模式結束後 MUST 可以切換至休息模式，
  休息模式結束後 MUST 可以切換回工作模式
- **FR-009**: 計時器的時間顯示 MUST 每秒更新一次，
  誤差不超過 ±1 秒
- **FR-010**: 應用程式 MUST 能在 Windows 10 以上環境正常執行

### Key Entities

- **Timer（計時器）**: 代表當前的倒數狀態。包含剩餘時間、
  運行狀態（停止/運行中/暫停）、當前模式（工作/休息）
- **Session（工作階段）**: 代表一次工作-休息循環。
  包含當前模式與預設的工作時間及休息時間

## Assumptions

- 音效使用系統內建音效或一個簡單的 beep 聲即可，
  不需要自訂音效檔案
- 應用程式為單視窗桌面程式，不需要系統匣（system tray）功能
- 不需要保存歷史記錄或統計資料（未來功能）
- 不需要自訂工作/休息時間長度（未來功能）
- 應用程式啟動後預設為工作模式

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 使用者從啟動應用程式到開始第一個番茄鐘，
  MUST 在 3 秒內完成（一次點擊）
- **SC-002**: 計時器顯示的剩餘時間與實際經過時間的誤差
  MUST 不超過每分鐘 ±1 秒
- **SC-003**: 音效提醒 MUST 在計時器到達 00:00 後 1 秒內響起
- **SC-004**: 使用者 MUST 能在不閱讀說明的情況下完成
  「開始 → 暫停 → 繼續 → 重置」的完整操作流程
- **SC-005**: 應用程式 MUST 能連續運行至少 8 個完整的
  工作-休息循環（4 小時）而不出現計時偏差或崩潰
